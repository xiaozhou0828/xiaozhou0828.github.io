<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="author" content="智能社 - zhinengshe.com" />
<meta name="copyright" content="智能社 - zhinengshe.com" />
<title>智能社 - www.zhinengshe.com</title>
<style>
*{margin:0;padding:0;}
html{overflow:hidden;}
body{background:#000;}
#c1{background:#000;}
</style>
<script>
function rnd(n,m){
	return 	Math.floor(Math.random()*(m-n) + n);
}

window.onload = function(){
	var oC = document.getElementById("c1");
	var gd = oC.getContext("2d");
	 
	var winW = window.innerWidth;
	var winH = window.innerHeight;
	oC.width = winW;
	oC.height = winH;
	
	//初始化
	var N = 5;
	var aPoint = [];//[{x,y,w,h,speedX,speedY}];
	for(var i = 0; i < N; i++){
		aPoint[i] = {
			w:10,
			h:10,
			x:rnd(0,winW),
			y:rnd(0,winH),
			speedX:rnd(-10,10),
			speedY:rnd(-10,10),	
		}
	}
	var oldPoint = [];//存平面的老的点
	setInterval(function(){
		gd.clearRect(0,0,oC.width,oC.height);
	
		//画
		for(var i = 0; i < N; i++){
			
			gd.fillStyle = "green";
			gd.fillRect(aPoint[i].x,aPoint[i].y,aPoint[i].w,aPoint[i].h);
			gd.strokeRect(aPoint[i].x,aPoint[i].y,aPoint[i].w,aPoint[i].h);
			
			
			//动 x y
			aPoint[i].x += aPoint[i].speedX;
			aPoint[i].y += aPoint[i].speedY;
			
			//限定范围
			if(aPoint[i].x < 0){
				aPoint[i].speedX *= -1;
			}
			
			if(aPoint[i].x > winW){
				aPoint[i].speedX *= -1;
			}
			if(aPoint[i].y < 0){
				aPoint[i].speedY *= -1;
			}
			
			if(aPoint[i].y > winH){
				aPoint[i].speedY *= -1;
			}
			
		}
		
		//连接点
		gd.beginPath();
		gd.moveTo(aPoint[0].x,aPoint[0].y);
		for(var i = 1; i < N; i++){
			gd.lineTo(aPoint[i].x,aPoint[i].y); 
		}
		gd.closePath();
		gd.strokeStyle = "green";
		gd.stroke();
		
		//阴影
		var arr = [];//一个平面的5个点的坐标
		for(var i = 0; i < N; i++){
			arr[i] = {x:aPoint[i].x,y:aPoint[i].y};
		}
		
		oldPoint.push(arr);
		
		//限定大小
		while(oldPoint.length > 10){
			oldPoint.shift();
		}
		
		
		//绘制阴影
		for(var i = 0; i < oldPoint.length; i++){
			var arr = oldPoint[i];//一个平面
			gd.beginPath();
			gd.moveTo(arr[0].x,arr[0].y);
			
			for(var j = 1; j < N; j++){
				gd.lineTo(arr[j].x,arr[j].y); 
			}
			gd.closePath();
			gd.strokeStyle = "green";
			gd.stroke();
		}
	
	},30);
	
	
 
	
};
</script>
</head>

<body>
<canvas id="c1"></canvas>

</body>
</html>
